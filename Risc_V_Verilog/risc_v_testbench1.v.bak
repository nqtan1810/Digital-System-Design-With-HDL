module risc_v_testbench1();
	
	parameter PATH_IMEM = "D:/University/Thiet_Ke_He_Thong_So_Voi_HDL/Final_Project/Risc_V_Verilog/testcase/iMem.bin";
	parameter PATH_REGFILE = "D:/University/Thiet_Ke_He_Thong_So_Voi_HDL/Final_Project/Risc_V_Verilog/testcase/regFile.bin";
	parameter PATH_DMEM = "D:/University/Thiet_Ke_He_Thong_So_Voi_HDL/Final_Project/Risc_V_Verilog/testcase/dMem.bin";
	
	reg clock;
	reg rstn;
	integer i;
	
	initial begin
		{clock, rstn} = 0;						// reset and prepare for starting
		repeat(2) @(posedge clock);
		rstn = 1;

		repeat(376) @(posedge clock);			// calculate 47th fibonacci
		 
//		if(risc_v_core.risc_v_datapath.dmem.dmem[risc_v_core.risc_v_datapath.regfile.regfile[28]-4] == 32'd2971215073) 
//			$display("PASSED");
//		else
//			$display("FAILED");
//			
//		if(risc_v_core.risc_v_datapath.dmem.dmem[risc_v_core.risc_v_datapath.regfile.regfile[28]-8] == 32'd1836311903) 
//			$display("PASSED");
//		else
//			$display("FAILED");
//			
//		if(risc_v_core.risc_v_datapath.dmem.dmem[risc_v_core.risc_v_datapath.regfile.regfile[28]-12] == 32'd1134903170) 
//			$display("PASSED");
//		else
//			$display("FAILED");
//			
//		if(risc_v_core.risc_v_datapath.dmem.dmem[risc_v_core.risc_v_datapath.regfile.regfile[28]-16] == 32'd701408733) 
//			$display("PASSED");
//		else
//			$display("FAILED");
//			
//		if(risc_v_core.risc_v_datapath.dmem.dmem[risc_v_core.risc_v_datapath.regfile.regfile[28]-20] == 32'd7433494437) 
//			$display("PASSED");
//		else
//			$display("FAILED");
//			
//		if(risc_v_core.risc_v_datapath.dmem.dmem[risc_v_core.risc_v_datapath.regfile.regfile[28]-24] == 32'd267914296) 
//			$display("PASSED");
//		else
//			$display("FAILED");
//			
//		if(risc_v_core.risc_v_datapath.dmem.dmem[risc_v_core.risc_v_datapath.regfile.regfile[28]-28] == 32'd165580141) 
//			$display("PASSED");
//		else
//			$display("FAILED");
//			
//		if(risc_v_core.risc_v_datapath.dmem.dmem[risc_v_core.risc_v_datapath.regfile.regfile[28]-32] == 32'd102334155) 
//			$display("PASSED");
//		else
//			$display("FAILED");

		$display("%d", risc_v_core.risc_v_datapath.dmem.dmem[risc_v_core.risc_v_datapath.regfile.regfile[28]-4]);
			
		$stop;
	end
		
	assign risc_v_core.risc_v_datapath.memRead = 1;	
		
	always #5 clock = ~clock;
	
	RISC_V #(.PATH_IMEM(PATH_IMEM),
				.PATH_REGFILE(PATH_REGFILE),
				.PATH_DMEM(PATH_DMEM)) risc_v_core (.clock(clock),
																.rstn(rstn));

	initial begin
		$monitor("[%2t],	%d", $time, risc_v_core.risc_v_datapath.writeData);
	end

endmodule 